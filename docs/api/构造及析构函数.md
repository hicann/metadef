# 构造及析构函数<a name="ZH-CN_TOPIC_0000002078486317"></a>

## 函数功能<a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_section36583473819"></a>

构造一个TensorData。

构造方式1：指定了tensor数据的地址以及用于管理tensor数据的函数manager。

构造方式2：指定了tensor数据的地址、用于管理tensor数据的函数manager、tensor数据所占内存大小、tensor数据所在的位置（host、device）。

构造方式3：移动构造形式。

注意：若manager为nullptr，则认为addr就是tensor的数据地址。否则，tensor数据的地址由manager给出。

## 函数原型<a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_section13230182415108"></a>

-   构造函数

    ```
    explicit TensorData(TensorAddress addr = nullptr, const TensorAddrManager manager = nullptr)
    explicit TensorData(TensorAddress addr, const TensorAddrManager manager, size_t size, TensorPlacement placement)
    TensorData(TensorData &&other) noexcept
    TensorData(const TensorData &) = delete
    ```

-   析构函数

    ```
    ~TensorData
    ```

## 参数说明<a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_section75395119104"></a>

<a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_table111938719446"></a>
<table><thead align="left"><tr id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_row6223476444"><th class="cellrowborder" valign="top" width="17.22%" id="mcps1.1.4.1.1"><p id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p10223674448"><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p10223674448"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p10223674448"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="15.32%" id="mcps1.1.4.1.2"><p id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p645511218169"><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p645511218169"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p645511218169"></a>输入/输出</p>
</th>
<th class="cellrowborder" valign="top" width="67.46%" id="mcps1.1.4.1.3"><p id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p1922337124411"><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p1922337124411"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p1922337124411"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_row152234713443"><td class="cellrowborder" valign="top" width="17.22%" headers="mcps1.1.4.1.1 "><p id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p2340183613156"><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p2340183613156"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p2340183613156"></a>addr</p>
</td>
<td class="cellrowborder" valign="top" width="15.32%" headers="mcps1.1.4.1.2 "><p id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p143401361158"><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p143401361158"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p143401361158"></a>输入</p>
</td>
<td class="cellrowborder" valign="top" width="67.46%" headers="mcps1.1.4.1.3 "><p id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p19544204917121"><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p19544204917121"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p19544204917121"></a>tensor数据的地址。</p>
<a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_screen18345839141710"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_screen18345839141710"></a><pre class="screen" codetype="Cpp" id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_screen18345839141710">using TensorAddress = void *;</pre>
</td>
</tr>
<tr id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_row125412192439"><td class="cellrowborder" valign="top" width="17.22%" headers="mcps1.1.4.1.1 "><p id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p62543195430"><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p62543195430"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p62543195430"></a>manager</p>
</td>
<td class="cellrowborder" valign="top" width="15.32%" headers="mcps1.1.4.1.2 "><p id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p4254151964319"><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p4254151964319"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p4254151964319"></a>输入</p>
</td>
<td class="cellrowborder" valign="top" width="67.46%" headers="mcps1.1.4.1.3 "><p id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p125421911434"><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p125421911434"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p125421911434"></a>tensor data的管理函数，若manager为空，则认为addr就是tensor的数据地址，且此数据不需要被释放。</p>
<a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_screen798405818183"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_screen798405818183"></a><pre class="screen" codetype="Cpp" id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_screen798405818183">using TensorAddrManager = ge::graphStatus (*)(TensorAddress addr, TensorOperateType operate_type, void **out);
enum TensorOperateType {
  kGetTensorAddress,  ///&lt; 获取Tensor的地址  
  kFreeTensor,        ///&lt; 释放Tensor  
  kPlusShareCount,    ///&lt; 共享Tensor  
  kTensorOperateType
};</pre>
</td>
</tr>
<tr id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_row65831331194318"><td class="cellrowborder" valign="top" width="17.22%" headers="mcps1.1.4.1.1 "><p id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p141214995818"><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p141214995818"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p141214995818"></a>size</p>
</td>
<td class="cellrowborder" valign="top" width="15.32%" headers="mcps1.1.4.1.2 "><p id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p201209915582"><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p201209915582"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p201209915582"></a>输入</p>
</td>
<td class="cellrowborder" valign="top" width="67.46%" headers="mcps1.1.4.1.3 "><p id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p4117129125810"><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p4117129125810"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p4117129125810"></a>tensor数据所占的内存大小。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_row1418721019337"><td class="cellrowborder" valign="top" width="17.22%" headers="mcps1.1.4.1.1 "><p id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p9187110183316"><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p9187110183316"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p9187110183316"></a>placement</p>
</td>
<td class="cellrowborder" valign="top" width="15.32%" headers="mcps1.1.4.1.2 "><p id="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p18187510163318"><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p18187510163318"></a><a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_p18187510163318"></a>输入</p>
</td>
<td class="cellrowborder" valign="top" width="67.46%" headers="mcps1.1.4.1.3 "><p id="zh-cn_topic_0000001635172297_p12781656194011"><a name="zh-cn_topic_0000001635172297_p12781656194011"></a><a name="zh-cn_topic_0000001635172297_p12781656194011"></a>tensor数据所在的设备位置。</p>
</td>
</tr>
</tbody>
</table>

## 返回值说明<a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_section25791320141317"></a>

初始化后的TensorData对象。

## 约束说明<a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_section19165124931511"></a>

无。

## 调用示例<a name="zh-cn_topic_0000001635172297_zh-cn_topic_0000001339549070_section320753512363"></a>

```
auto addr = reinterpret_cast<void *>(0x10);
TensorData td(addr, HostAddrManager, 100U, kOnHost);
```

