# 内部关联接口<a name="ZH-CN_TOPIC_0000002078486549"></a>

在进行算子原型注册、Tiling实现、shape推导过程中，使用到的外部开放接口中会调用到一些辅助数据结构和接口，称之为**内部关联接口**。开发者不会直接调用内部关联接口，此处仅作简单介绍。

## KernelContext类<a name="zh-cn_topic_0000001593171586_section1572124612295"></a>

本类是对底层数据结构KernelRunContext的包装，包含kernel执行时所需的算子输入、输出个数信息以及输入输出数据信息、compute\_node\_info和kernel\_extend\_info。

**表 1**  KernelContext类成员函数

<a name="zh-cn_topic_0000001593171586_table12381149123019"></a>
<table><thead align="left"><tr id="zh-cn_topic_0000001593171586_row12382849183014"><th class="cellrowborder" valign="top" width="26.119999999999997%" id="mcps1.2.3.1.1"><p id="zh-cn_topic_0000001593171586_p33822497306"><a name="zh-cn_topic_0000001593171586_p33822497306"></a><a name="zh-cn_topic_0000001593171586_p33822497306"></a>接口名</p>
</th>
<th class="cellrowborder" valign="top" width="73.88%" id="mcps1.2.3.1.2"><p id="zh-cn_topic_0000001593171586_p1738217499304"><a name="zh-cn_topic_0000001593171586_p1738217499304"></a><a name="zh-cn_topic_0000001593171586_p1738217499304"></a>接口功能</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0000001593171586_row33822496301"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p12382249113015"><a name="zh-cn_topic_0000001593171586_p12382249113015"></a><a name="zh-cn_topic_0000001593171586_p12382249113015"></a>GetInput</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p1638274913309"><a name="zh-cn_topic_0000001593171586_p1638274913309"></a><a name="zh-cn_topic_0000001593171586_p1638274913309"></a>获取输入的Chain指针。Chain是一个可以用来保存任意类型数据的类。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row1538224920308"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p8166145483517"><a name="zh-cn_topic_0000001593171586_p8166145483517"></a><a name="zh-cn_topic_0000001593171586_p8166145483517"></a>GetInputNum</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001388503065_p4805102810120"><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001388503065_p4805102810120"></a><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001388503065_p4805102810120"></a>获取kernel的输入数量。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row538284915308"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p616655483519"><a name="zh-cn_topic_0000001593171586_p616655483519"></a><a name="zh-cn_topic_0000001593171586_p616655483519"></a>GetInputPointer</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001388703149_p4805102810120"><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001388703149_p4805102810120"></a><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001388703149_p4805102810120"></a>获取输入数据的指针，本函数首先获取输入Chain，然后从输入Chain中获取指针。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row0382249103015"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p316615453519"><a name="zh-cn_topic_0000001593171586_p316615453519"></a><a name="zh-cn_topic_0000001593171586_p316615453519"></a>GetInputStrPointer</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001388508293_p4805102810120"><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001388508293_p4805102810120"></a><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001388508293_p4805102810120"></a>获取输入字符串的指针，本函数首先获取输入Chain，然后从输入Chain中获取指针。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row1382649153019"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p6166115415353"><a name="zh-cn_topic_0000001593171586_p6166115415353"></a><a name="zh-cn_topic_0000001593171586_p6166115415353"></a>GetInputValue</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338423078_p4805102810120"><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338423078_p4805102810120"></a><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338423078_p4805102810120"></a>获取输入数据的值，本函数首先获取输入Chain，然后从输入Chain中获取值。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row038264919309"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p12166175413511"><a name="zh-cn_topic_0000001593171586_p12166175413511"></a><a name="zh-cn_topic_0000001593171586_p12166175413511"></a>GetOutput</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p17832125613390"><a name="zh-cn_topic_0000001593171586_p17832125613390"></a><a name="zh-cn_topic_0000001593171586_p17832125613390"></a>获取输出的Chain指针。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row124051927113512"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p111667542356"><a name="zh-cn_topic_0000001593171586_p111667542356"></a><a name="zh-cn_topic_0000001593171586_p111667542356"></a>GetOutput2</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001337943526_p4805102810120"><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001337943526_p4805102810120"></a><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001337943526_p4805102810120"></a>获取输出的Chain指针。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row1981310279358"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p20166175433513"><a name="zh-cn_topic_0000001593171586_p20166175433513"></a><a name="zh-cn_topic_0000001593171586_p20166175433513"></a>GetOutputNum</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338103210_p873514234409"><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338103210_p873514234409"></a><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338103210_p873514234409"></a>获取kernel的输出数量。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row181492817358"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p61665546357"><a name="zh-cn_topic_0000001593171586_p61665546357"></a><a name="zh-cn_topic_0000001593171586_p61665546357"></a>GetOutputPointer</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p1114528143516"><a name="zh-cn_topic_0000001593171586_p1114528143516"></a><a name="zh-cn_topic_0000001593171586_p1114528143516"></a>获取输出数据的指针，本函数首先获取输出Chain，然后从Chain中获取指针。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row632072813510"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p20166135443513"><a name="zh-cn_topic_0000001593171586_p20166135443513"></a><a name="zh-cn_topic_0000001593171586_p20166135443513"></a>GetContext</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p83201528133517"><a name="zh-cn_topic_0000001593171586_p83201528133517"></a><a name="zh-cn_topic_0000001593171586_p83201528133517"></a>获取底层的context结构体。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row8450162812353"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p181667548352"><a name="zh-cn_topic_0000001593171586_p181667548352"></a><a name="zh-cn_topic_0000001593171586_p181667548352"></a>GetKernelExtend</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p10450102893517"><a name="zh-cn_topic_0000001593171586_p10450102893517"></a><a name="zh-cn_topic_0000001593171586_p10450102893517"></a>获取kernel扩展信息的指针。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row859611287350"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p1116635410352"><a name="zh-cn_topic_0000001593171586_p1116635410352"></a><a name="zh-cn_topic_0000001593171586_p1116635410352"></a>GetComputeNodeExtend</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p18596112813353"><a name="zh-cn_topic_0000001593171586_p18596112813353"></a><a name="zh-cn_topic_0000001593171586_p18596112813353"></a>获取计算节点信息的指针。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row1074119283356"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p0166854173515"><a name="zh-cn_topic_0000001593171586_p0166854173515"></a><a name="zh-cn_topic_0000001593171586_p0166854173515"></a>MutableInput</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p15741728123517"><a name="zh-cn_topic_0000001593171586_p15741728123517"></a><a name="zh-cn_topic_0000001593171586_p15741728123517"></a>获取输入的Chain指针。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row5888528203514"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p16166175410356"><a name="zh-cn_topic_0000001593171586_p16166175410356"></a><a name="zh-cn_topic_0000001593171586_p16166175410356"></a>MutableInputPointer</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p2088822815351"><a name="zh-cn_topic_0000001593171586_p2088822815351"></a><a name="zh-cn_topic_0000001593171586_p2088822815351"></a>获取输入数据的指针，本函数首先获取输入Chain，然后从输入Chain中获取指针。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row7226132910358"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p201671254163520"><a name="zh-cn_topic_0000001593171586_p201671254163520"></a><a name="zh-cn_topic_0000001593171586_p201671254163520"></a>IsInlineSize</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338428326_p4805102810120"><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338428326_p4805102810120"></a><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338428326_p4805102810120"></a>根据数据的长度判断一个数据是否会被inline存储，所谓inline存储是指此数据保存在context中时不需要单独分配内存。</p>
</td>
</tr>
</tbody>
</table>

## TilingParseContext类<a name="zh-cn_topic_0000001593171586_section39510252200"></a>

用于TilingParse所需的信息保存在本类中，本类为编写算子的TilingParse函数时提供上下文信息，在TilingParse时可以从本类中获取所需的信息。

**表 2**  TilingParseContext类成员函数

<a name="zh-cn_topic_0000001593171586_table531819181212"></a>
<table><thead align="left"><tr id="zh-cn_topic_0000001593171586_row143181418142117"><th class="cellrowborder" valign="top" width="26.119999999999997%" id="mcps1.2.3.1.1"><p id="zh-cn_topic_0000001593171586_p11318161813216"><a name="zh-cn_topic_0000001593171586_p11318161813216"></a><a name="zh-cn_topic_0000001593171586_p11318161813216"></a>接口名</p>
</th>
<th class="cellrowborder" valign="top" width="73.88%" id="mcps1.2.3.1.2"><p id="zh-cn_topic_0000001593171586_p53181818192116"><a name="zh-cn_topic_0000001593171586_p53181818192116"></a><a name="zh-cn_topic_0000001593171586_p53181818192116"></a>接口功能</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0000001593171586_row7318191892120"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p36107142216"><a name="zh-cn_topic_0000001593171586_p36107142216"></a><a name="zh-cn_topic_0000001593171586_p36107142216"></a>GetCompiledJson</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p13211711172214"><a name="zh-cn_topic_0000001593171586_p13211711172214"></a><a name="zh-cn_topic_0000001593171586_p13211711172214"></a>获取算子编译产生的JSON字符串。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row431831892112"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p781922519228"><a name="zh-cn_topic_0000001593171586_p781922519228"></a><a name="zh-cn_topic_0000001593171586_p781922519228"></a>GetCompiledInfo</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p15155184410225"><a name="zh-cn_topic_0000001593171586_p15155184410225"></a><a name="zh-cn_topic_0000001593171586_p15155184410225"></a>获取CompiledInfo实例。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row18318618122111"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p17832113211229"><a name="zh-cn_topic_0000001593171586_p17832113211229"></a><a name="zh-cn_topic_0000001593171586_p17832113211229"></a>GetPlatformInfo</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p7939152102218"><a name="zh-cn_topic_0000001593171586_p7939152102218"></a><a name="zh-cn_topic_0000001593171586_p7939152102218"></a>获取fe::PlatFormInfos指针。</p>
</td>
</tr>
</tbody>
</table>

## Chain类<a name="zh-cn_topic_0000001593171586_section1325085110412"></a>

Chain是一个可以用来保存任意类型数据的类。通过其Set接口保存数据，通过GetPointer或者GetValue方法获取保存的数据。

**表 3**  Chain类成员函数

<a name="zh-cn_topic_0000001593171586_table1836881054212"></a>
<table><thead align="left"><tr id="zh-cn_topic_0000001593171586_row6369510124217"><th class="cellrowborder" valign="top" width="26.119999999999997%" id="mcps1.2.3.1.1"><p id="zh-cn_topic_0000001593171586_p0369910194210"><a name="zh-cn_topic_0000001593171586_p0369910194210"></a><a name="zh-cn_topic_0000001593171586_p0369910194210"></a>接口名</p>
</th>
<th class="cellrowborder" valign="top" width="73.88%" id="mcps1.2.3.1.2"><p id="zh-cn_topic_0000001593171586_p15369110104217"><a name="zh-cn_topic_0000001593171586_p15369110104217"></a><a name="zh-cn_topic_0000001593171586_p15369110104217"></a>接口功能</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0000001593171586_row936981017428"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p143691910104217"><a name="zh-cn_topic_0000001593171586_p143691910104217"></a><a name="zh-cn_topic_0000001593171586_p143691910104217"></a>GetPointer</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p1369191004214"><a name="zh-cn_topic_0000001593171586_p1369191004214"></a><a name="zh-cn_topic_0000001593171586_p1369191004214"></a>获取指向Chain中保存数据的指针。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row1736931015426"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p133697105422"><a name="zh-cn_topic_0000001593171586_p133697105422"></a><a name="zh-cn_topic_0000001593171586_p133697105422"></a>GetValue</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p2369510154215"><a name="zh-cn_topic_0000001593171586_p2369510154215"></a><a name="zh-cn_topic_0000001593171586_p2369510154215"></a>获取Chain中保存的数据的值。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row13691910144215"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p6369101054210"><a name="zh-cn_topic_0000001593171586_p6369101054210"></a><a name="zh-cn_topic_0000001593171586_p6369101054210"></a>Set</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338423070_p4805102810120"><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338423070_p4805102810120"></a><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338423070_p4805102810120"></a>将数据设置到Chain中。设置数据指针时，会尝试调用deleter将原有保存在Chain的数据删除。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row183698101425"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p7655543194317"><a name="zh-cn_topic_0000001593171586_p7655543194317"></a><a name="zh-cn_topic_0000001593171586_p7655543194317"></a>SetWithDefaultDeleter</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001388703137_p4805102810120"><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001388703137_p4805102810120"></a><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001388703137_p4805102810120"></a>将数据设置到Chain中。设置数据指针时，会尝试调用deleter将原有保存在Chain的数据删除。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row113691710114214"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p14369910144215"><a name="zh-cn_topic_0000001593171586_p14369910144215"></a><a name="zh-cn_topic_0000001593171586_p14369910144215"></a>HasDeleter</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338263102_p4805102810120"><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338263102_p4805102810120"></a><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001338263102_p4805102810120"></a>判断当前Chain中保存的数据是否有deleter。</p>
</td>
</tr>
</tbody>
</table>

## ContinuousBuffer类<a name="zh-cn_topic_0000001593171586_section6842175511413"></a>

ContinuousBuffer类用于连续存储任意类型的数据，每个数据被转成uint8\_t数组进行存储，每个存储单元称为一个buffer。ContinuousBuffer使用两个属性来描述被存储的数据，分别是存储buffer的个数以及每个buffer对应的内存偏移量offsets\_。每个buffer在内存上是连续的。

**表 4**  ContinuousBuffer类成员函数

<a name="zh-cn_topic_0000001593171586_table10322164914412"></a>
<table><thead align="left"><tr id="zh-cn_topic_0000001593171586_row1232234934418"><th class="cellrowborder" valign="top" width="26.119999999999997%" id="mcps1.2.3.1.1"><p id="zh-cn_topic_0000001593171586_p1732304916448"><a name="zh-cn_topic_0000001593171586_p1732304916448"></a><a name="zh-cn_topic_0000001593171586_p1732304916448"></a>接口名</p>
</th>
<th class="cellrowborder" valign="top" width="73.88%" id="mcps1.2.3.1.2"><p id="zh-cn_topic_0000001593171586_p4323349184415"><a name="zh-cn_topic_0000001593171586_p4323349184415"></a><a name="zh-cn_topic_0000001593171586_p4323349184415"></a>接口功能</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0000001593171586_row16323104974418"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p1818323134619"><a name="zh-cn_topic_0000001593171586_p1818323134619"></a><a name="zh-cn_topic_0000001593171586_p1818323134619"></a>GetNum</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p2323349194410"><a name="zh-cn_topic_0000001593171586_p2323349194410"></a><a name="zh-cn_topic_0000001593171586_p2323349194410"></a>获取buffer的数量。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row532314924417"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p840010371461"><a name="zh-cn_topic_0000001593171586_p840010371461"></a><a name="zh-cn_topic_0000001593171586_p840010371461"></a>GetTotalLength</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001390418837_p1775574215191"><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001390418837_p1775574215191"></a><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001390418837_p1775574215191"></a>获取本实例的总长度。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row6323104944410"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p26519013477"><a name="zh-cn_topic_0000001593171586_p26519013477"></a><a name="zh-cn_topic_0000001593171586_p26519013477"></a>Get</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p123236491446"><a name="zh-cn_topic_0000001593171586_p123236491446"></a><a name="zh-cn_topic_0000001593171586_p123236491446"></a>获取buffer指针、长度信息。</p>
</td>
</tr>
</tbody>
</table>

## KernelExtendInfo类<a name="zh-cn_topic_0000001593171586_section1822183714473"></a>

本类是用于保存的kernel运行时的额外信息，包括kernel的名字、类型、用于profiling注册的kernel type的index以及计算节点名的index。

**表 5**  KernelExtendInfo类成员函数

<a name="zh-cn_topic_0000001593171586_table138191317487"></a>
<table><thead align="left"><tr id="zh-cn_topic_0000001593171586_row4381813184817"><th class="cellrowborder" valign="top" width="26.119999999999997%" id="mcps1.2.3.1.1"><p id="zh-cn_topic_0000001593171586_p2381131354811"><a name="zh-cn_topic_0000001593171586_p2381131354811"></a><a name="zh-cn_topic_0000001593171586_p2381131354811"></a>接口名</p>
</th>
<th class="cellrowborder" valign="top" width="73.88%" id="mcps1.2.3.1.2"><p id="zh-cn_topic_0000001593171586_p7381171310483"><a name="zh-cn_topic_0000001593171586_p7381171310483"></a><a name="zh-cn_topic_0000001593171586_p7381171310483"></a>接口功能</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0000001593171586_row23811613184819"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p3381413114812"><a name="zh-cn_topic_0000001593171586_p3381413114812"></a><a name="zh-cn_topic_0000001593171586_p3381413114812"></a>GetKernelName</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p2381113174811"><a name="zh-cn_topic_0000001593171586_p2381113174811"></a><a name="zh-cn_topic_0000001593171586_p2381113174811"></a>获取kernel name。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row438121374816"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p192696655211"><a name="zh-cn_topic_0000001593171586_p192696655211"></a><a name="zh-cn_topic_0000001593171586_p192696655211"></a>SetKernelName</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p1438121312489"><a name="zh-cn_topic_0000001593171586_p1438121312489"></a><a name="zh-cn_topic_0000001593171586_p1438121312489"></a>设置kernel name。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row438181314489"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p32696619529"><a name="zh-cn_topic_0000001593171586_p32696619529"></a><a name="zh-cn_topic_0000001593171586_p32696619529"></a>GetKernelType</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001340190062_p4805102810120"><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001340190062_p4805102810120"></a><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001340190062_p4805102810120"></a>获取kernel type。一个算子可以对应多个kernel，也就对应多个kernel type。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row13811913154819"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p13269864522"><a name="zh-cn_topic_0000001593171586_p13269864522"></a><a name="zh-cn_topic_0000001593171586_p13269864522"></a>SetKernelType</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p63812013114813"><a name="zh-cn_topic_0000001593171586_p63812013114813"></a><a name="zh-cn_topic_0000001593171586_p63812013114813"></a>设置kernel type。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row238119131485"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p42708635210"><a name="zh-cn_topic_0000001593171586_p42708635210"></a><a name="zh-cn_topic_0000001593171586_p42708635210"></a>SetKernelTypeIdx</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001339870506_p427112951916"><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001339870506_p427112951916"></a><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001339870506_p427112951916"></a>设置kernel_type_idx_，用于profiling。profiling时设置的kernel type字符串对应的idx，用idx代替kernel type字符串作为标识，提升速度。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row112219214523"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p3270136145210"><a name="zh-cn_topic_0000001593171586_p3270136145210"></a><a name="zh-cn_topic_0000001593171586_p3270136145210"></a>SetNodeNameIdx</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p1983133514544"><a name="zh-cn_topic_0000001593171586_p1983133514544"></a><a name="zh-cn_topic_0000001593171586_p1983133514544"></a>设置compute_node_name_idx_，用于profiling，profiling时，用idx代替node name字符串作为标识，提升速度。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row1468316255220"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p9270262521"><a name="zh-cn_topic_0000001593171586_p9270262521"></a><a name="zh-cn_topic_0000001593171586_p9270262521"></a>GetNodeNameIdx</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001340193442_p427112951916"><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001340193442_p427112951916"></a><a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001340193442_p427112951916"></a>获取compute_node_name_idx_，用于profiling。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row68837524"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p1927015665212"><a name="zh-cn_topic_0000001593171586_p1927015665212"></a><a name="zh-cn_topic_0000001593171586_p1927015665212"></a>GetKernelTypeIdx</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p1286314529"><a name="zh-cn_topic_0000001593171586_p1286314529"></a><a name="zh-cn_topic_0000001593171586_p1286314529"></a>获取kernel_type_idx_，用于profiling。</p>
</td>
</tr>
</tbody>
</table>

## TensorOperateType<a name="zh-cn_topic_0000001593171586_section34191934185511"></a>

```
enum TensorOperateType {
  kGetTensorAddress,  ///< 获取Tensor的地址
  kFreeTensor,        ///< 释放Tensor
  kPlusShareCount,    ///< 共享Tensor
  kTensorOperateType
};
```

## StructSizeInfoBase类<a name="zh-cn_topic_0000001593171586_section16483171385611"></a>

StructSizeInfoBase类用来存放、获取Ascend C高阶API和用户自定义的tiling结构体大小，通过单例实现一个结构体信息库。

**表 6**  StructSizeInfoBase类成员函数

<a name="zh-cn_topic_0000001593171586_zh-cn_topic_0000001491300625_table18149577913"></a>
<table><thead align="left"><tr id="zh-cn_topic_0000001593171586_zh-cn_topic_0000001491300625_row61411571196"><th class="cellrowborder" valign="top" width="17.66%" id="mcps1.2.3.1.1"><p id="p7407105611614"><a name="p7407105611614"></a><a name="p7407105611614"></a>接口名</p>
</th>
<th class="cellrowborder" valign="top" width="82.34%" id="mcps1.2.3.1.2"><p id="p340735619169"><a name="p340735619169"></a><a name="p340735619169"></a>接口功能</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0000001593171586_row859810388416"><td class="cellrowborder" valign="top" width="17.66%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p85609468410"><a name="zh-cn_topic_0000001593171586_p85609468410"></a><a name="zh-cn_topic_0000001593171586_p85609468410"></a>GetInstance</p>
</td>
<td class="cellrowborder" valign="top" width="82.34%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p145981538154119"><a name="zh-cn_topic_0000001593171586_p145981538154119"></a><a name="zh-cn_topic_0000001593171586_p145981538154119"></a>获取StructSizeInfoBase类的单例。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row47851330124113"><td class="cellrowborder" valign="top" width="17.66%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p9849722164214"><a name="zh-cn_topic_0000001593171586_p9849722164214"></a><a name="zh-cn_topic_0000001593171586_p9849722164214"></a>SetStructSize</p>
</td>
<td class="cellrowborder" valign="top" width="82.34%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p19786153019412"><a name="zh-cn_topic_0000001593171586_p19786153019412"></a><a name="zh-cn_topic_0000001593171586_p19786153019412"></a>设置高阶API/用户自定义tiling结构大小。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row9488633164310"><td class="cellrowborder" valign="top" width="17.66%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p10752338164312"><a name="zh-cn_topic_0000001593171586_p10752338164312"></a><a name="zh-cn_topic_0000001593171586_p10752338164312"></a>GetStructSize</p>
</td>
<td class="cellrowborder" valign="top" width="82.34%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p44033452436"><a name="zh-cn_topic_0000001593171586_p44033452436"></a><a name="zh-cn_topic_0000001593171586_p44033452436"></a>获取高阶API/用户自定义tiling结构大小。</p>
</td>
</tr>
</tbody>
</table>

## TilingDataStructBase类<a name="zh-cn_topic_0000001593171586_section1149433393319"></a>

TilingDataStructBase的类，用于记录Tiling结构体构造过程信息。提供以下接口：

**表 7**  TilingDataStructBase类成员函数

<a name="zh-cn_topic_0000001593171586_table1126147343"></a>
<table><thead align="left"><tr id="zh-cn_topic_0000001593171586_row18319149349"><th class="cellrowborder" valign="top" width="20.01%" id="mcps1.2.3.1.1"><p id="p735011931719"><a name="p735011931719"></a><a name="p735011931719"></a>接口名</p>
</th>
<th class="cellrowborder" valign="top" width="79.99000000000001%" id="mcps1.2.3.1.2"><p id="p1535117951719"><a name="p1535117951719"></a><a name="p1535117951719"></a>接口功能</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0000001593171586_row1731814193412"><td class="cellrowborder" valign="top" width="20.01%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p133161473410"><a name="zh-cn_topic_0000001593171586_p133161473410"></a><a name="zh-cn_topic_0000001593171586_p133161473410"></a>GetInstance</p>
</td>
<td class="cellrowborder" valign="top" width="79.99000000000001%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p5319143349"><a name="zh-cn_topic_0000001593171586_p5319143349"></a><a name="zh-cn_topic_0000001593171586_p5319143349"></a>获取TilingDataStructBase类的单例。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row3321416347"><td class="cellrowborder" valign="top" width="20.01%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0000001593171586_p2656486359"><a name="zh-cn_topic_0000001593171586_p2656486359"></a><a name="zh-cn_topic_0000001593171586_p2656486359"></a>RecordTilingStruct</p>
</td>
<td class="cellrowborder" valign="top" width="79.99000000000001%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p8430103512342"><a name="zh-cn_topic_0000001593171586_p8430103512342"></a><a name="zh-cn_topic_0000001593171586_p8430103512342"></a>用于框架检查不同算子注册同名不同结构tiling结构体情况，若出现则会打印warning信息。</p>
</td>
</tr>
</tbody>
</table>

## OpExecuteContext类<a name="section1164414381135"></a>

本类用于保存图模式下调用单算子执行API场景下的上下文。

**表 8**  OpExecuteContext类成员函数

<a name="table42001132171315"></a>
<table><thead align="left"><tr id="row82001832131319"><th class="cellrowborder" valign="top" width="26.119999999999997%" id="mcps1.2.3.1.1"><p id="p169111281712"><a name="p169111281712"></a><a name="p169111281712"></a>接口名</p>
</th>
<th class="cellrowborder" valign="top" width="73.88%" id="mcps1.2.3.1.2"><p id="p196915121176"><a name="p196915121176"></a><a name="p196915121176"></a>接口功能</p>
</th>
</tr>
</thead>
<tbody><tr id="row82001328131"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p15200183217134"><a name="p15200183217134"></a><a name="p15200183217134"></a>GetInputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p820013271314"><a name="p820013271314"></a><a name="p820013271314"></a>获取指定索引输入的Tensor。</p>
</td>
</tr>
<tr id="row1120013323137"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p22001532141316"><a name="p22001532141316"></a><a name="p22001532141316"></a>GetOptionalInputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p10200133221313"><a name="p10200133221313"></a><a name="p10200133221313"></a>获取指定索引的可选输入的Tensor。</p>
</td>
</tr>
<tr id="row18200193219134"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p620023221310"><a name="p620023221310"></a><a name="p620023221310"></a>GetDynamicInputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p192009320138"><a name="p192009320138"></a><a name="p192009320138"></a>获取指定索引的动态个数输入的Tensor。</p>
</td>
</tr>
<tr id="row320018324139"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p2200193219139"><a name="p2200193219139"></a><a name="p2200193219139"></a>GetRequiredInputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p420043211133"><a name="p420043211133"></a><a name="p420043211133"></a>获取指定索引的必选输入的Tensor。</p>
</td>
</tr>
<tr id="row192001432121315"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p42001332161317"><a name="p42001332161317"></a><a name="p42001332161317"></a>GetOutputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p320012323131"><a name="p320012323131"></a><a name="p320012323131"></a>获取指定索引输出的Tensor。</p>
</td>
</tr>
<tr id="row14200153212136"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p9200123211131"><a name="p9200123211131"></a><a name="p9200123211131"></a>GetDynamicOutputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p120011329133"><a name="p120011329133"></a><a name="p120011329133"></a>获取指定索引的动态个数输出的Tensor。</p>
</td>
</tr>
<tr id="row6201532191313"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p1720103231310"><a name="p1720103231310"></a><a name="p1720103231310"></a>GetRequiredOutputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p15201173231320"><a name="p15201173231320"></a><a name="p15201173231320"></a>获取指定索引的必选输出的Tensor。</p>
</td>
</tr>
<tr id="row19201113201318"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p720143221313"><a name="p720143221313"></a><a name="p720143221313"></a>GetStream</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p1720123241320"><a name="p1720123241320"></a><a name="p1720123241320"></a>获取下发算子的流信息。</p>
</td>
</tr>
<tr id="row172011932161313"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p10201173210139"><a name="p10201173210139"></a><a name="p10201173210139"></a>GetOpExecuteFunc</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p15201173201319"><a name="p15201173201319"></a><a name="p15201173201319"></a>获取多kernel算子的执行回调函数。</p>
</td>
</tr>
<tr id="row82011532161311"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p3201732191314"><a name="p3201732191314"></a><a name="p3201732191314"></a>MallocWorkspace</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p52011932201315"><a name="p52011932201315"></a><a name="p52011932201315"></a>分配workspace内存。</p>
</td>
</tr>
<tr id="row12201163231315"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p6201103217134"><a name="p6201103217134"></a><a name="p6201103217134"></a>FreeWorkspace</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p72012327139"><a name="p72012327139"></a><a name="p72012327139"></a>释放workspace内存。</p>
</td>
</tr>
<tr id="row16201143221319"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p11201832151318"><a name="p11201832151318"></a><a name="p11201832151318"></a>GetDeterministic</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p1120183241312"><a name="p1120183241312"></a><a name="p1120183241312"></a>获取确定性计算配置选项。</p>
</td>
</tr>
<tr id="row172015327130"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p6201133210138"><a name="p6201133210138"></a><a name="p6201133210138"></a>GetAllowHf32</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p42011732131315"><a name="p42011732131315"></a><a name="p42011732131315"></a>获取allow_hf32配置选项。</p>
</td>
</tr>
<tr id="row182011332151318"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p62014323131"><a name="p62014323131"></a><a name="p62014323131"></a>GetPrecisionMode</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p182014322137"><a name="p182014322137"></a><a name="p182014322137"></a>获取精度模式配置选项。</p>
</td>
</tr>
</tbody>
</table>

## OpExecutePrepareContext类<a name="section637320407559"></a>

本类用于保存图模式下调用单算子执行一阶段API（准备算子下发参数）场景下的上下文。

**表 9**  OpExecutePrepareContext类成员函数

<a name="table498419140593"></a>
<table><thead align="left"><tr id="row169841714115917"><th class="cellrowborder" valign="top" width="26.119999999999997%" id="mcps1.2.3.1.1"><p id="p598481417594"><a name="p598481417594"></a><a name="p598481417594"></a>接口名</p>
</th>
<th class="cellrowborder" valign="top" width="73.88%" id="mcps1.2.3.1.2"><p id="p998431495919"><a name="p998431495919"></a><a name="p998431495919"></a>接口功能</p>
</th>
</tr>
</thead>
<tbody><tr id="row14984121415911"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p14984314125919"><a name="p14984314125919"></a><a name="p14984314125919"></a>GetInputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p0984714145917"><a name="p0984714145917"></a><a name="p0984714145917"></a>获取指定索引输入的Tensor。</p>
</td>
</tr>
<tr id="row209841614115914"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p109842148593"><a name="p109842148593"></a><a name="p109842148593"></a>GetOptionalInputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p8984181415914"><a name="p8984181415914"></a><a name="p8984181415914"></a>获取指定索引的可选输入的Tensor。</p>
</td>
</tr>
<tr id="row16984914105911"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p1984014165913"><a name="p1984014165913"></a><a name="p1984014165913"></a>GetDynamicInputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p398491414595"><a name="p398491414595"></a><a name="p398491414595"></a>获取指定索引的动态个数输入的Tensor。</p>
</td>
</tr>
<tr id="row89842140592"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p6984131445916"><a name="p6984131445916"></a><a name="p6984131445916"></a>GetRequiredInputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p998412143593"><a name="p998412143593"></a><a name="p998412143593"></a>获取指定索引的必选输入的Tensor。</p>
</td>
</tr>
<tr id="row7985214185911"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p15985214165918"><a name="p15985214165918"></a><a name="p15985214165918"></a>GetOutputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p1898501465920"><a name="p1898501465920"></a><a name="p1898501465920"></a>获取指定索引输出的Tensor。</p>
</td>
</tr>
<tr id="row5985161415595"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p9985151412592"><a name="p9985151412592"></a><a name="p9985151412592"></a>GetDynamicOutputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p798571410593"><a name="p798571410593"></a><a name="p798571410593"></a>获取指定索引的动态个数输出的Tensor。</p>
</td>
</tr>
<tr id="row20985111420590"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p17985014135916"><a name="p17985014135916"></a><a name="p17985014135916"></a>GetRequiredOutputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p109851214145910"><a name="p109851214145910"></a><a name="p109851214145910"></a>获取指定索引的必选输出的Tensor。</p>
</td>
</tr>
<tr id="row10985141445914"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p9985121410590"><a name="p9985121410590"></a><a name="p9985121410590"></a>SetOpApiParamsWithDefaultDeleter</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p179854143597"><a name="p179854143597"></a><a name="p179854143597"></a>设置传递给算子下发阶段使用的参数结构体指针到输出Chain中。</p>
</td>
</tr>
<tr id="row09851014145912"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p0985121465915"><a name="p0985121465915"></a><a name="p0985121465915"></a>SetOpApiParams</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p9985141425918"><a name="p9985141425918"></a><a name="p9985141425918"></a>设置传递给算子下发阶段使用的参数结构体指针到输出Chain中。</p>
</td>
</tr>
<tr id="row39855149592"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p13985151419598"><a name="p13985151419598"></a><a name="p13985151419598"></a>SetWorkspaceSizes</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p1298561455918"><a name="p1298561455918"></a><a name="p1298561455918"></a>设置需要申请的Workspace内存大小。</p>
</td>
</tr>
<tr id="row998520144598"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p1998531415916"><a name="p1998531415916"></a><a name="p1998531415916"></a>GetDeterministic</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p4985114185914"><a name="p4985114185914"></a><a name="p4985114185914"></a>获取确定性计算配置选项。</p>
</td>
</tr>
<tr id="row998516147590"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p698521417596"><a name="p698521417596"></a><a name="p698521417596"></a>GetAllowHf32</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p398531415916"><a name="p398531415916"></a><a name="p398531415916"></a>获取allow_hf32配置选项。</p>
</td>
</tr>
<tr id="row6985614205913"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p129857145598"><a name="p129857145598"></a><a name="p129857145598"></a>GetPrecisionMode</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p15985614185913"><a name="p15985614185913"></a><a name="p15985614185913"></a>获取精度模式配置选项。</p>
</td>
</tr>
</tbody>
</table>

## OpExecuteLaunchContext类<a name="section4115424565"></a>

本类用于保存图模式下调用单算子执行二阶段API（算子下发）场景下的上下文。

**表 10**  OpExecuteLaunchContext类成员函数

<a name="table19434135587"></a>
<table><thead align="left"><tr id="row74354325818"><th class="cellrowborder" valign="top" width="26.119999999999997%" id="mcps1.2.3.1.1"><p id="p5435173165816"><a name="p5435173165816"></a><a name="p5435173165816"></a>接口名</p>
</th>
<th class="cellrowborder" valign="top" width="73.88%" id="mcps1.2.3.1.2"><p id="p114355313588"><a name="p114355313588"></a><a name="p114355313588"></a>接口功能</p>
</th>
</tr>
</thead>
<tbody><tr id="row74354375819"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p11435739588"><a name="p11435739588"></a><a name="p11435739588"></a>GetInputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p343510355812"><a name="p343510355812"></a><a name="p343510355812"></a>获取指定索引输入的Tensor。</p>
</td>
</tr>
<tr id="row1643511310586"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p44351385815"><a name="p44351385815"></a><a name="p44351385815"></a>GetOptionalInputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p114356320588"><a name="p114356320588"></a><a name="p114356320588"></a>获取指定索引的可选输入的Tensor。</p>
</td>
</tr>
<tr id="row14352316587"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p114358312584"><a name="p114358312584"></a><a name="p114358312584"></a>GetDynamicInputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p12435431588"><a name="p12435431588"></a><a name="p12435431588"></a>获取指定索引的动态个数输入的Tensor。</p>
</td>
</tr>
<tr id="row44351936583"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p44351238581"><a name="p44351238581"></a><a name="p44351238581"></a>GetRequiredInputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p1443515310583"><a name="p1443515310583"></a><a name="p1443515310583"></a>获取指定索引的必选输入的Tensor。</p>
</td>
</tr>
<tr id="row13435163145816"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p84358345815"><a name="p84358345815"></a><a name="p84358345815"></a>GetOutputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p134354312581"><a name="p134354312581"></a><a name="p134354312581"></a>获取指定索引输出的Tensor。</p>
</td>
</tr>
<tr id="row20435339582"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p184351733585"><a name="p184351733585"></a><a name="p184351733585"></a>GetDynamicOutputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p17435536586"><a name="p17435536586"></a><a name="p17435536586"></a>获取指定索引的动态个数输出的Tensor。</p>
</td>
</tr>
<tr id="row54359325817"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p143513115815"><a name="p143513115815"></a><a name="p143513115815"></a>GetRequiredOutputTensor</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p243563155817"><a name="p243563155817"></a><a name="p243563155817"></a>获取指定索引的必选输出的Tensor。</p>
</td>
</tr>
<tr id="row1143519305815"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p44356365815"><a name="p44356365815"></a><a name="p44356365815"></a>GetOpApiParams</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p84357313582"><a name="p84357313582"></a><a name="p84357313582"></a>设置一阶段输出数据到输出Chain中。</p>
</td>
</tr>
<tr id="row343519311582"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p134359319585"><a name="p134359319585"></a><a name="p134359319585"></a>GetWorkspaceSizes</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p2043519310588"><a name="p2043519310588"></a><a name="p2043519310588"></a>获取申请的Workspace内存大小。</p>
</td>
</tr>
<tr id="row174351535586"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p34353313582"><a name="p34353313582"></a><a name="p34353313582"></a>GetWorkspaceAddrs</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p1343510320581"><a name="p1343510320581"></a><a name="p1343510320581"></a>获取申请的Workspace地址。</p>
</td>
</tr>
<tr id="row144356345816"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p94353310587"><a name="p94353310587"></a><a name="p94353310587"></a>GetStream</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p1643514318582"><a name="p1643514318582"></a><a name="p1643514318582"></a>获取下发算子的流信息。</p>
</td>
</tr>
</tbody>
</table>

## OpImplSpaceRegistryV2类<a name="zh-cn_topic_0000001593171586_section24175714314"></a>

本类用于保存算子交付件，用于管理、隔离不同离线模型、默认安装目录下不同版本的算子交付件。

**表 11**  OpImplSpaceRegistryV2类成员函数

<a name="zh-cn_topic_0000001593171586_table88101340926"></a>
<table><thead align="left"><tr id="zh-cn_topic_0000001593171586_row381044011217"><th class="cellrowborder" valign="top" width="26.119999999999997%" id="mcps1.2.3.1.1"><p id="p1178616153176"><a name="p1178616153176"></a><a name="p1178616153176"></a>接口名</p>
</th>
<th class="cellrowborder" valign="top" width="73.88%" id="mcps1.2.3.1.2"><p id="p278661551710"><a name="p278661551710"></a><a name="p278661551710"></a>接口功能</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0000001593171586_row48102406213"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p492885674219"><a name="p492885674219"></a><a name="p492885674219"></a>OpImplSpaceRegistryV2</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p479913452216"><a name="zh-cn_topic_0000001593171586_p479913452216"></a><a name="zh-cn_topic_0000001593171586_p479913452216"></a>OpImplSpaceRegistryV2构造函数。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row38101407212"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p0455154184312"><a name="p0455154184312"></a><a name="p0455154184312"></a>~OpImplSpaceRegistryV2</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0000001593171586_p117973451320"><a name="zh-cn_topic_0000001593171586_p117973451320"></a><a name="zh-cn_topic_0000001593171586_p117973451320"></a>OpImplSpaceRegistryV2析构函数。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row12811140521"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p8331125210422"><a name="p8331125210422"></a><a name="p8331125210422"></a>AddSoToRegistry</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p1933110525428"><a name="p1933110525428"></a><a name="p1933110525428"></a>读取so路径，解析so里包含的算子交付件。</p>
</td>
</tr>
<tr id="zh-cn_topic_0000001593171586_row16576195519446"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p73311352194210"><a name="p73311352194210"></a><a name="p73311352194210"></a>GetOpImpl</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p2033175224219"><a name="p2033175224219"></a><a name="p2033175224219"></a>获取该版本下的某个算子类型的所有交付件。</p>
</td>
</tr>
</tbody>
</table>

## DefaultOpImplSpaceRegistryV2类<a name="section1497512541733"></a>

单例类，用于管理默认安装路径下的算子交付件注册中心，称之为默认注册中心，一个进程中只有唯一一份。

**表 12**  DefaultOpImplSpaceRegistryV2类成员函数

<a name="table1997520541635"></a>
<table><thead align="left"><tr id="row19751541931"><th class="cellrowborder" valign="top" width="26.119999999999997%" id="mcps1.2.3.1.1"><p id="p39762541532"><a name="p39762541532"></a><a name="p39762541532"></a>函数名称含义</p>
</th>
<th class="cellrowborder" valign="top" width="73.88%" id="mcps1.2.3.1.2"><p id="p20976654634"><a name="p20976654634"></a><a name="p20976654634"></a>含义</p>
</th>
</tr>
</thead>
<tbody><tr id="row159765544318"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p14694161516592"><a name="p14694161516592"></a><a name="p14694161516592"></a>GetSpaceRegistry</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p49761854830"><a name="p49761854830"></a><a name="p49761854830"></a>获取默认注册中心的space registry，space registry对应OpImplSpaceRegistryV2类对象。</p>
</td>
</tr>
<tr id="row1797645413313"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p153611920145920"><a name="p153611920145920"></a><a name="p153611920145920"></a>SetSpaceRegistry</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p797685411311"><a name="p797685411311"></a><a name="p797685411311"></a>设置默认注册中心的space registry，space registry对应OpImplSpaceRegistryV2类对象。</p>
</td>
</tr>
<tr id="row1797617541237"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p19544112585918"><a name="p19544112585918"></a><a name="p19544112585918"></a>ClearSpaceRegistry</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p109766542032"><a name="p109766542032"></a><a name="p109766542032"></a>清空当前默认注册中心里保存的所有space registry。</p>
</td>
</tr>
</tbody>
</table>

## OppSoDesc类<a name="section1288520101417"></a>

本类用于组织算子交付件的so路径以及so归属哪种类型的包（内置包或者自定义算子包）。

**表 13**  OppSoDesc类成员函数

<a name="table7885181010418"></a>
<table><thead align="left"><tr id="row78866101411"><th class="cellrowborder" valign="top" width="26.119999999999997%" id="mcps1.2.3.1.1"><p id="p68861410941"><a name="p68861410941"></a><a name="p68861410941"></a>函数名称含义</p>
</th>
<th class="cellrowborder" valign="top" width="73.88%" id="mcps1.2.3.1.2"><p id="p888617108411"><a name="p888617108411"></a><a name="p888617108411"></a>含义</p>
</th>
</tr>
</thead>
<tbody><tr id="row13886131014416"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p777211817011"><a name="p777211817011"></a><a name="p777211817011"></a>OppSoDesc</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p988691015411"><a name="p988691015411"></a><a name="p988691015411"></a>So描述信息的构造函数，包含一个输入so路径以及so的描述信息。</p>
</td>
</tr>
<tr id="row1888691014415"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p13432525801"><a name="p13432525801"></a><a name="p13432525801"></a>OppSoDesc</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p1588611103412"><a name="p1588611103412"></a><a name="p1588611103412"></a>So描述信息的构造函数，包含一组输入so路径以及该组so的描述信息。</p>
</td>
</tr>
<tr id="row1441619454210"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p12701049421"><a name="p12701049421"></a><a name="p12701049421"></a>OppSoDesc</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p1341615451421"><a name="p1341615451421"></a><a name="p1341615451421"></a>So描述信息的移动构造函数</p>
</td>
</tr>
<tr id="row1688671014411"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p57451036223"><a name="p57451036223"></a><a name="p57451036223"></a>GetSoPaths</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p19886510641"><a name="p19886510641"></a><a name="p19886510641"></a>获取当前So描述信息中的so路径。</p>
</td>
</tr>
<tr id="row688671012410"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p1094044317213"><a name="p1094044317213"></a><a name="p1094044317213"></a>GetPackageName</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p8886111016415"><a name="p8886111016415"></a><a name="p8886111016415"></a>获取当前So描述信息中的包名。</p>
</td>
</tr>
</tbody>
</table>

## OppPackageUtils类<a name="section19166116412"></a>

本类用于按照优先级加载所有的安装目录下的so，优先级：自定义算子 \> 内置安装目录算子。

**表 14**  OppPackageUtils类成员函数

<a name="table10916121117417"></a>
<table><thead align="left"><tr id="row1591661119410"><th class="cellrowborder" valign="top" width="26.119999999999997%" id="mcps1.2.3.1.1"><p id="p179163111445"><a name="p179163111445"></a><a name="p179163111445"></a>函数名称含义</p>
</th>
<th class="cellrowborder" valign="top" width="73.88%" id="mcps1.2.3.1.2"><p id="p1591681116418"><a name="p1591681116418"></a><a name="p1591681116418"></a>含义</p>
</th>
</tr>
</thead>
<tbody><tr id="row179168112415"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p638391155"><a name="p638391155"></a><a name="p638391155"></a>LoadAllOppPackage</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p1712914301871"><a name="p1712914301871"></a><a name="p1712914301871"></a>静态成员方法，加载所有的安装目录下的so。</p>
</td>
</tr>
</tbody>
</table>

## OppImplVersionTag类<a name="section14778131317420"></a>

```
enum class OppImplVersionTag {
 kOpp,
 kOppKernel,
 // add new version definitions here
 kVersionEnd = 20
};
```

## OpImplFunctions类<a name="section12916130415"></a>

本类用于保存算子注册的Shape/ShapeRange/DataType推导、Tiling计算、值依赖等信息，不可扩展。

**表 15**  OpImplFunctions类成员函数

<a name="table89111311415"></a>
<table><thead align="left"><tr id="row1310201311417"><th class="cellrowborder" valign="top" width="26.119999999999997%" id="mcps1.2.3.1.1"><p id="p1910313546"><a name="p1910313546"></a><a name="p1910313546"></a>函数名称含义</p>
</th>
<th class="cellrowborder" valign="top" width="73.88%" id="mcps1.2.3.1.2"><p id="p16101131544"><a name="p16101131544"></a><a name="p16101131544"></a>含义</p>
</th>
</tr>
</thead>
<tbody><tr id="row0917118112112"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p825862022110"><a name="p825862022110"></a><a name="p825862022110"></a>operator=</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p158163832116"><a name="p158163832116"></a><a name="p158163832116"></a>拷贝赋值函数</p>
</td>
</tr>
<tr id="row19101013141"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p1836944720484"><a name="p1836944720484"></a><a name="p1836944720484"></a>HasDataDependency</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p15101113343"><a name="p15101113343"></a><a name="p15101113343"></a>判断算子是否注册了InferShape值依赖，表示在Shape推导时依赖输入的值。</p>
</td>
</tr>
<tr id="row11010131945"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p1817945810488"><a name="p1817945810488"></a><a name="p1817945810488"></a>IsInputDataDependency</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p1251416536483"><a name="p1251416536483"></a><a name="p1251416536483"></a>判断算子的第index个输入是否为InferShape值依赖，其中index是算子的原型输入顺序。</p>
</td>
</tr>
<tr id="row01014135418"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p18948714495"><a name="p18948714495"></a><a name="p18948714495"></a>SetInputDataDependency</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p198641136181612"><a name="p198641136181612"></a><a name="p198641136181612"></a>设置算子的第index个输入为InferShape值依赖，其中index是算子的原型输入顺序。</p>
</td>
</tr>
<tr id="row31091319413"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p146471012164913"><a name="p146471012164913"></a><a name="p146471012164913"></a>HasHostInput</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p251205394813"><a name="p251205394813"></a><a name="p251205394813"></a>判断算子是否注册了输入地址需要是一个host地址。</p>
</td>
</tr>
<tr id="row61011312410"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p14631175492"><a name="p14631175492"></a><a name="p14631175492"></a>IsHostInput</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p4511145316480"><a name="p4511145316480"></a><a name="p4511145316480"></a>判断算子的第index个输入是否需要是一个host地址，其中index是算子的原型输入顺序。</p>
</td>
</tr>
<tr id="row13101131046"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p198941224134911"><a name="p198941224134911"></a><a name="p198941224134911"></a>SetHostInputs</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p11779701201"><a name="p11779701201"></a><a name="p11779701201"></a>设置算子的第index个输入需要是一个host地址，其中index是算子的原型输入顺序。</p>
</td>
</tr>
<tr id="row2010213943"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p16961030194913"><a name="p16961030194913"></a><a name="p16961030194913"></a>HasTilingInputDataDependency</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p2674191213259"><a name="p2674191213259"></a><a name="p2674191213259"></a>判断算子是否注册了Tiling值依赖，表示算子在Tiling计算时依赖输入的值。</p>
</td>
</tr>
<tr id="row1101136413"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p127431736184915"><a name="p127431736184915"></a><a name="p127431736184915"></a>IsTilingInputDataDependency</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p4674912122514"><a name="p4674912122514"></a><a name="p4674912122514"></a>判断算子的第index个输入是否为Tiling值依赖，其中index是算子的原型输入顺序。</p>
</td>
</tr>
<tr id="row810513143"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p262064144915"><a name="p262064144915"></a><a name="p262064144915"></a>SetTilingInputDataDependency</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p166742012132511"><a name="p166742012132511"></a><a name="p166742012132511"></a>设置算子的第index个输入为Tiling值依赖，其中index是算子的原型输入顺序。</p>
</td>
</tr>
<tr id="row13111136417"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p1141584717493"><a name="p1141584717493"></a><a name="p1141584717493"></a>IsSupportTilingDependencyPlacement</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p1150615534485"><a name="p1150615534485"></a><a name="p1150615534485"></a>判断算子是否支持入参指定的Tiling计算所在的设备类型。</p>
</td>
</tr>
<tr id="row611171315411"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p73175531491"><a name="p73175531491"></a><a name="p73175531491"></a>SetTilingDependencyPlacement</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p24302564352"><a name="p24302564352"></a><a name="p24302564352"></a>设置算子Tiling计算所在的设备类型，算子注册了Tiling值依赖的场景下需要设置。</p>
</td>
</tr>
<tr id="row141151319415"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p1248012117508"><a name="p1248012117508"></a><a name="p1248012117508"></a>IsOutputShapeDependOnCompute</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p194120210415"><a name="p194120210415"></a><a name="p194120210415"></a>判断算子输出shape是否需要在计算完成后才能获取。</p>
</td>
</tr>
<tr id="row1111613540"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p9457146105012"><a name="p9457146105012"></a><a name="p9457146105012"></a>IsOutputShapeDependOnCompute</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p114121321134119"><a name="p114121321134119"></a><a name="p114121321134119"></a>判断算子的第index个输出shape是否需要在计算完成后才能获取，其中index是算子的原型输入顺序。</p>
</td>
</tr>
<tr id="row151151310411"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p134101712105012"><a name="p134101712105012"></a><a name="p134101712105012"></a>SetOutputShapeDependOnCompute</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p5412421154114"><a name="p5412421154114"></a><a name="p5412421154114"></a>设置算子的第index个输出shape需要在计算完成后才能获取，其中index是算子的原型输入顺序。</p>
</td>
</tr>
</tbody>
</table>

## OpImplFunctionsV2类<a name="section1426161062210"></a>

OpImplFunctions的子类，可扩展，本类用于保存算子注册的GenerateTask、CheckSupport等信息。

**表 16**  OpImplFunctionsV2类成员函数

<a name="table4426111082213"></a>
<table><thead align="left"><tr id="row1042641015227"><th class="cellrowborder" valign="top" width="26.119999999999997%" id="mcps1.2.3.1.1"><p id="p14261410122217"><a name="p14261410122217"></a><a name="p14261410122217"></a>函数名称含义</p>
</th>
<th class="cellrowborder" valign="top" width="73.88%" id="mcps1.2.3.1.2"><p id="p1342781062218"><a name="p1342781062218"></a><a name="p1342781062218"></a>含义</p>
</th>
</tr>
</thead>
<tbody><tr id="row1842714107224"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p6516165562215"><a name="p6516165562215"></a><a name="p6516165562215"></a>OpImplFunctionsV2</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p102141203249"><a name="p102141203249"></a><a name="p102141203249"></a>默认构造函数</p>
</td>
</tr>
<tr id="row842761016221"><td class="cellrowborder" valign="top" width="26.119999999999997%" headers="mcps1.2.3.1.1 "><p id="p4442163718234"><a name="p4442163718234"></a><a name="p4442163718234"></a>operator=</p>
</td>
<td class="cellrowborder" valign="top" width="73.88%" headers="mcps1.2.3.1.2 "><p id="p9404834162213"><a name="p9404834162213"></a><a name="p9404834162213"></a>拷贝赋值函数</p>
</td>
</tr>
</tbody>
</table>

